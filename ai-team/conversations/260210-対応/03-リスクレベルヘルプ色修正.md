# T3: リスクレベルヘルプのラベル色修正

## 概要
休眠顧客リストのリスクレベル列にあるヘルプ（?マーク）で表示されるバッジの色と、実際のリストに表示されるバッジの色が一致していない問題。

## 対象ファイル
**ファイル**: `frontend/src/components/dashboards/dormant/DormantCustomerList.tsx`

## 調査結果

### 実表示のバッジ（getRiskBadge関数）
**179-189行目**:
```typescript
const riskConfig = {
  low:      { label: "低",   color: "bg-green-100 text-green-800",  variant: "secondary" },
  medium:   { label: "中",   color: "bg-yellow-100 text-yellow-800", variant: "secondary" },
  high:     { label: "高",   color: "bg-orange-100 text-orange-800", variant: "destructive" },
  critical: { label: "危険", color: "bg-red-100 text-red-800",      variant: "destructive" },
  unrated:  { label: "未評価", color: "bg-gray-100 text-gray-600",  variant: "secondary" }
}
```

### ツールチップ内のバッジ

#### フィルター横のツールチップ（663-701行目）
```html
<Badge className="bg-red-100 text-red-800 text-xs px-1 py-0">危険</Badge>
<Badge className="bg-orange-100 text-orange-800 text-xs px-1 py-0">高</Badge>
<Badge className="bg-yellow-100 text-yellow-800 text-xs px-1 py-0">中</Badge>
<Badge className="bg-green-100 text-green-800 text-xs px-1 py-0">低</Badge>
```

#### テーブルヘッダーの?マーク（874-914行目）
```html
<Badge className="bg-red-100 text-red-800">危険</Badge>
<Badge className="bg-orange-100 text-orange-800">高</Badge>
<Badge className="bg-yellow-100 text-yellow-800">中</Badge>
<Badge className="bg-green-100 text-green-800">低</Badge>
```

### 判明した差異

CSSクラス名自体は一致している。問題は **`variant` プロパティ** にある可能性が高い：

| 場所 | variant | className |
|------|---------|-----------|
| getRiskBadge（実表示） | `secondary` or `destructive` | `bg-xxx-100 text-xxx-800` |
| ツールチップ内 | **指定なし（default）** | `bg-xxx-100 text-xxx-800` |

Badgeコンポーネントの `variant` がデフォルトの場合、コンポーネント内部のスタイルが `className` を上書きして、実表示と異なる見た目になる。

## 対応内容

### 修正箇所1: フィルター横のツールチップ（663-701行目）
各Badgeに `variant` プロパティを追加:
- 危険: `variant="destructive"`
- 高: `variant="destructive"`
- 中: `variant="secondary"`
- 低: `variant="secondary"`

### 修正箇所2: テーブルヘッダーの?マーク（874-914行目）
同様に各Badgeに `variant` プロパティを追加

### 代替案
`getRiskBadge` 関数から `variant` を削除し、`className` のみで色を制御する方法もある。この場合はツールチップ側の修正は不要。

## 確認チェックリスト
- [ ] ヘルプの「危険」バッジの色と、リスト内「危険」バッジの色が一致
- [ ] ヘルプの「高」バッジの色と、リスト内「高」バッジの色が一致
- [ ] ヘルプの「中」バッジの色と、リスト内「中」バッジの色が一致
- [ ] ヘルプの「低」バッジの色と、リスト内「低」バッジの色が一致
- [ ] `DormantCustomerTableVirtual.tsx` の `getRiskBadge` とも一致していること
