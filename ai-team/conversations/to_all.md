# チーム全体への連絡事項

## 2025年8月24日（土）- 無料プラン機能制限開発開始

### To: Yuki, Takashi, 福田様、ERISさん

ERISさんの文書統一作業と詳細レビューが完了しました。
月曜日（8/26）から無料プラン機能制限の実装を開始します。

### 📝 統一された仕様（ERIS確認済み）

#### 対象3機能
1. **休眠顧客分析** (dormant_analysis)
2. **前年同月比分析** (yoy_comparison)
3. **購入回数詳細分析** (purchase_frequency)

#### 技術仕様統一
- API: `/api/feature-selection/...`
- DB: `UserFeatureSelections`/`FeatureUsageLogs`/`FeatureLimits`
- フロント: `frontend/src/app/billing/free-plan-setup/page.tsx`
- マイグレーション: `docs/04-development/03-データベース/マイグレーション/`

### 🎯 役割分担（確定）

**Takashi（バックエンド）**: 5.5日
- 無料プラン機能制限API: 2.5日
- GDPR Webhook実装: 3日

**Yuki（フロントエンド）**: 3日
- 無料プラン機能制限UI: 2.5日
- GDPR管理画面: 0.5日

### 📅 実装スケジュール
- **Day 1 (8/26月)**: データベース構築とAPI基盤
- **Day 2 (8/27火)**: ビジネスロジックとUI基盤
- **Day 3 (8/28水)**: UI実装と統合
- **Day 4 (8/29木)**: テストとGDPR実装
- **Day 5 (8/30金)**: 最終調整とドキュメント

### ⚡ ERISレビューの主要改善点（反映済み）
1. **権限制御の一元化**: サーバー側ミドルウェアで完全制御
2. **30日制限の厳密化**: UTC統一、月初リセットではなく30日後
3. **競合対策**: 冪等トークン＋楽観ロック実装
4. **監査ログ**: 変更前後の記録と計測
5. **Shopify連携**: APP_SUBSCRIPTIONS_UPDATE Webhook対応

### 📋 開発指示書配布済み
- `to_yuki.md`: フロントエンド実装詳細
- `to_takashi.md`: バックエンド実装詳細
各自のファイルを確認して、月曜日から実装を開始してください。

### 🧩 追加提供（ERISより）
- `to_eris.md` に以下の雛形を掲載しました：
  - TypeScript API 型定義（frontend）
  - C# DTO 定義（backend）
  - FeatureAccessMiddleware の最小実装例
  - 冪等性トークン検証フィルタ例＋（任意）DBテーブル例
→ 実装開始時に流用してください。命名とパスはドキュメントの統一方針に準拠。

### 🚨 福田様へのお願い
データベースマイグレーション未実行が最優先事項です。
月曜日朝一番での実行をお願いいたします。

### 📊 現在のプロジェクト進捗: 78%
- ✅ 課金システムバックエンド: 100%
- ✅ TypeScriptエラー: 解消済み
- ⏳ GDPR実装: 0%（来週実装）
- ⏳ 無料プラン機能制限: 0%（来週実装）

申請目標: 9月2日（月）

よろしくお願いいたします。

---

## 2025年8月24日（土）20:00 - 詳細設計完了と実装開始連絡

### To: Yuki, Takashi, 福田様、小野様、浜地様

## 📋 無料プラン機能制限・GDPR詳細設計完了

### 完成した詳細設計書
1. **無料プラン機能制限（3機能選択制）**
   - `/docs/06-shopify/02-課金システム/05-無料プラン機能制限/要件定義書.md` 
   - `/docs/06-shopify/02-課金システム/05-無料プラン機能制限/技術設計詳細書.md`
   - `/docs/06-shopify/02-課金システム/05-無料プラン機能制限/実装タスクリスト.md`

2. **GDPR対応実装計画**
   - `/docs/06-shopify/03-GDPR/実装計画書.md`

### 対象の3機能（確定）
- 休眠顧客分析
- 前年同月比分析
- 購入回数詳細分析

### 技術ハイライト（レビュー反映済み）
- 権限制御の一元化（サーバー側ミドルウェア）
- 30日制限の厳密化（UTC統一）
- 冪等トークン＋楽観ロック
- 監査ログ（変更前後の記録）
- Shopify Webhook連携（APP_SUBSCRIPTIONS_UPDATE）

## 🚨 最優先事項

プロジェクトが申請目標から2週間遅延しています。
以下の対応を緊急で進めてください。

### 1. 本日中の対応【Takashi】
- [ ] `2025-08-13-AddWebhookEventsTable.sql`をDevelopment環境に適用
- [ ] マイグレーション管理ドキュメントを更新
- [ ] 完了報告を`report_takashi.md`に記載

### 2. 週明けの対応【全員】

#### 月曜日（8/26）朝一番
- **Takashi**: GDPR Webhook実装開始
- **Yuki**: 課金システムフォルダのファイル名日本語化
- **福田様**: Azure本番環境のリソース確認

#### 水曜日（8/28）締切
- **GDPR Webhook完全実装**（Takashi）
- **申請用スクリーンショット5枚準備**（Yuki）
- **アプリロゴ最終版**（浜地様）

### 3. ドキュメント整理要望への対応【Yuki】
`/docs/06-shopify/02-課金システム/`フォルダについて、日本語ファイル名への変更要望が来ています。
以下の変更を実施してください：

現在:
```
- GraphQL_API最新仕様.md
- Shopifyサブスクリプション技術ガイド.md
- システム設計書.md
- フロー図解.md
```

変更案を`to_kenji.md`に提案してください。

## 📊 進捗状況サマリー

### 完了済み
- OAuth認証問題解決
- 課金システム基盤実装
- ドキュメント基本整理

### 未完了（ブロッカー）
- GDPR Webhook未実装
- マイグレーション未適用
- 申請素材未準備

## 🎯 来週の申請提出に向けて

### 成功条件
1. GDPR対応100%完了
2. 全環境でマイグレーション適用済み
3. 申請素材（ロゴ、スクリーンショット、説明文）完成

### リスク
- GDPR未実装による自動却下
- 本番環境でのマイグレーション不整合

## 📅 重要日程

- **8/26（月）18:00**: 進捗確認ミーティング
- **8/30（金）**: 申請前最終チェック
- **9/2（月）**: Shopifyアプリ申請提出

## 💬 コミュニケーション

- 質問・懸念事項: 各自の`to_[名前].md`ファイルに記載
- 進捗報告: 各自の`report_[名前].md`ファイルに記載
- 毎日10:00: 簡単な進捗共有（SlackまたはメールでOK）

## チーム一丸となって頑張りましょう！

申請まであと1週間です。
全員の協力で必ず達成できます。

### 実装開始スケジュール（8/26月曜日〜）

**Day 1 (8/26月)**: データベース構築とAPI基盤
**Day 2 (8/27火)**: ビジネスロジックとフロントエンド基盤  
**Day 3 (8/28水)**: UI実装と統合
**Day 4 (8/29木)**: テストとGDPR実装
**Day 5 (8/30金)**: 最終調整とドキュメント

詳細は各自のタスクリストを確認してください。

---
Kenji（AIプロジェクトマネージャー）
2025年8月24日 20:00

---

## 過去の連絡事項

### 2025年8月18日 - 会議議事録
`docs\01-project-management\00_meeting\250818_会議議事録.md`参照
- 課金システムの要件定義、実装、テストを完了目標
- 価格帯と無料トライアル期間の最終決定待ち

### 2025年8月11日 - OAuth認証問題の調査結果共有
- リダイレクトエラーの原因特定
- 環境変数設定の修正案提示
- Azure App Service設定の更新依頼

### 2025年8月4日 - EC Ranger名称変更完了
- フロントエンド・バックエンド両方で名称統一
- GDPR対応の早期完了
- デモ準備万全


