# ä½œæ¥­å ±å‘Šæ›¸ - 2025å¹´8æœˆ12æ—¥ï¼ˆæœˆï¼‰
**ä½œæˆè€…:** Kenjiï¼ˆAIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒžãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼‰  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:** EC Ranger (Shopify AI Marketing Suite)

## ðŸ“Š æœ¬æ—¥ã®æˆæžœã‚µãƒžãƒªãƒ¼

### 1. OAuthèªè¨¼å•é¡Œã®å®Œå…¨è§£æ±º âœ…
- HMACæ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã®æ ¹æœ¬åŽŸå› ã‚’ç‰¹å®šã—ä¿®æ­£
- API Key/Secretä¸ä¸€è‡´å•é¡Œã‚’è§£æ±º
- JSON deserializationå•é¡Œã‚’ä¿®æ­£
- **çµæžœ:** Shopify OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼å®Œå…¨å‹•ä½œç¢ºèª

### 2. ãƒ‡ãƒ¼ã‚¿åŒæœŸæ©Ÿèƒ½ã®å®Ÿè£…é–‹å§‹ ðŸš€

#### Takashiï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰ã®æˆæžœ
- **HangFireå®Ÿè£…å®Œäº†**
  - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°Žå…¥ã¨è¨­å®šå®Œäº†
  - KeepAliveServiceå®Ÿè£…ï¼ˆAzureå¯¾ç­–ï¼‰
  - èªè¨¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å®Ÿè£…
  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ï¼ˆhttp://localhost:5168/hangfireï¼‰
  
- **xUnitãƒ†ã‚¹ãƒˆå®Ÿè£…**
  - 19ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆï¼ˆç›®æ¨™å¤§å¹…è¶…éŽï¼‰
  - ShopifyProductSyncJobTests: 8ãƒ†ã‚¹ãƒˆ
  - DashboardControllerTests: 11ãƒ†ã‚¹ãƒˆ
  
- **APIå®Ÿè£…**
  - DashboardControllerå®Œæˆ
  - åŒæœŸã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ 

#### Yukiï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰ã®æˆæžœ
- **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢å®Œæˆ**
  - 4ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
  - TypeScriptã‚¨ãƒ©ãƒ¼ä¿®æ­£å®Œäº†
  - APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæº–å‚™å®Œäº†

### 3. è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ ðŸ“
- **ãƒ‡ãƒ¼ã‚¿åŒæœŸè¨­è¨ˆä»•æ§˜æ›¸** (`/docs/04-development/data-sync-design-specification.md`)
  - 4ã¤ã®åŒæœŸã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆåˆå›žã€å®šæœŸã€æ‰‹å‹•ã€Webhookï¼‰
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒžè¨­è¨ˆ
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æˆ¦ç•¥
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–æ–¹é‡

## ðŸ”„ ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹

### å®Œäº†ã‚¿ã‚¹ã‚¯ âœ…
```
- Shopify OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼
- HangFireåŸºæœ¬è¨­å®šã¨ã‚¸ãƒ§ãƒ–å®Ÿè£…
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UIï¼ˆ4ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
- xUnitãƒ†ã‚¹ãƒˆåŸºç›¤æ§‹ç¯‰ï¼ˆ19ãƒ†ã‚¹ãƒˆï¼‰
- ãƒ‡ãƒ¼ã‚¿åŒæœŸè¨­è¨ˆä»•æ§˜æ›¸
```

### é€²è¡Œä¸­ã‚¿ã‚¹ã‚¯ ðŸ”„
```
- åˆå›žåŒæœŸï¼ˆInitialSyncJobï¼‰å®Ÿè£…
- å•†å“ãƒ‡ãƒ¼ã‚¿åŒæœŸæ©Ÿèƒ½
- åŒæœŸçŠ¶æ³è¡¨ç¤ºç”»é¢UI
```

### æ˜Žæ—¥ã®å„ªå…ˆã‚¿ã‚¹ã‚¯ ðŸ“…
```
1. SyncStates/SyncHistoryãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. InitialSyncJobå®Œå…¨å®Ÿè£…
3. åŒæœŸçŠ¶æ³è¡¨ç¤ºç”»é¢ã®åŸºæœ¬å®Ÿè£…
4. å®šæœŸåŒæœŸï¼ˆScheduledSyncJobï¼‰å®Ÿè£…é–‹å§‹
```

## ðŸ’¡ æŠ€è¡“çš„æ±ºå®šäº‹é …

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š
1. **HangFireã«ã‚ˆã‚‹ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¸ãƒ§ãƒ–ç®¡ç†**
   - SQL Serverãƒ™ãƒ¼ã‚¹ã®ã‚¸ãƒ§ãƒ–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
   - ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°: CPUÃ—2ï¼ˆ44ãƒ¯ãƒ¼ã‚«ãƒ¼ï¼‰
   - KeepAliveServiceã§Azureå¯¾å¿œ

2. **åŒæœŸæˆ¦ç•¥**
   - åˆå›žåŒæœŸ: å…¨ãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã‚«ãƒ¼ã‚½ãƒ«ãƒ™ãƒ¼ã‚¹å†é–‹æ©Ÿèƒ½
   - å®šæœŸåŒæœŸ: 1æ™‚é–“ã”ã¨ã€å·®åˆ†ã®ã¿
   - æ‰‹å‹•åŒæœŸ: UIçµŒç”±ã€æ—¢å­˜åŒæœŸã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½
   - Webhook: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

3. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - Pollyã«ã‚ˆã‚‹ãƒªãƒˆãƒ©ã‚¤ãƒãƒªã‚·ãƒ¼ï¼ˆ3å›žã€æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼‰
   - ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã§è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±
   - Application Insightsã«ã‚ˆã‚‹ãƒ¡ãƒˆãƒªã‚¯ã‚¹åŽé›†

## ðŸš¨ è¦ç¢ºèªäº‹é …ï¼ˆç¦ç”°æ§˜ï¼‰

1. **Azure App Serviceè¨­å®š**
   - ã€ŒAlways Onã€è¨­å®šã®æœ‰åŠ¹åŒ–ãŒå¿…è¦
   - ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³ã®ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ç¢ºèª

2. **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**
   - HangFireãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç®¡ç†è€…ãƒ­ãƒ¼ãƒ«å®šç¾©
   - Basicèªè¨¼ã®è³‡æ ¼æƒ…å ±ç®¡ç†æ–¹æ³•

3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**
   - Shopifyãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆ2req/secï¼‰ã¸ã®å¯¾å¿œæ–¹é‡
   - è¤‡æ•°ã‚¹ãƒˆã‚¢åŒæ™‚å®Ÿè¡Œæ™‚ã®åˆ¶å¾¡æ–¹æ³•

4. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**
   - åŒæœŸå±¥æ­´ã®ä¿æŒæœŸé–“ï¼ˆææ¡ˆï¼š30æ—¥ï¼‰

## ðŸ“ˆ é€²æ—çŠ¶æ³

```
å…¨ä½“é€²æ—: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%

èªè¨¼æ©Ÿèƒ½:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
HangFireè¨­å®š: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
å•†å“åŒæœŸ:     â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 40%
é¡§å®¢åŒæœŸ:     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
æ³¨æ–‡åŒæœŸ:     â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%
åŒæœŸç”»é¢:     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20%
```

## ðŸ”— æ˜Žæ—¥ã®ä½œæ¥­é–‹å§‹ã‚¬ã‚¤ãƒ‰

### Takashiå‘ã‘
1. **æœ€åˆã«ã‚„ã‚‹ã“ã¨**
   ```bash
   cd backend/ShopifyAnalyticsApi
   dotnet ef migrations add AddSyncManagementTables
   dotnet ef database update
   ```

2. **å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**
   - `Jobs/InitialSyncJob.cs` - åˆå›žåŒæœŸå®Ÿè£…
   - `Services/SyncService.cs` - åŒæœŸã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
   - `Exceptions/SyncExceptions.cs` - ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–

3. **å‚è€ƒè³‡æ–™**
   - è¨­è¨ˆä»•æ§˜æ›¸: `/docs/04-development/data-sync-design-specification.md`
   - ä½œæ¥­æŒ‡ç¤º: `/ai-team/to_takashi.md`

### Yukiå‘ã‘
1. **æœ€åˆã«ã‚„ã‚‹ã“ã¨**
   ```bash
   cd frontend
   npm run dev
   # åŒæœŸç”»é¢ã®åŸºæœ¬æ§‹é€ ä½œæˆ
   ```

2. **å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**
   - `app/(authenticated)/sync/page.tsx` - ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
   - `app/(authenticated)/sync/components/` - å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - `lib/api/sync.ts` - APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

3. **å‚è€ƒè³‡æ–™**
   - è¨­è¨ˆä»•æ§˜æ›¸: `/docs/04-development/data-sync-design-specification.md`
   - ä½œæ¥­æŒ‡ç¤º: `/ai-team/to_yuki.md`

## ðŸŽ¯ ä»Šé€±ã®ç›®æ¨™

### 8æœˆ13æ—¥ï¼ˆç«ï¼‰
- åˆå›žåŒæœŸå®Œå…¨å®Ÿè£…
- åŒæœŸçŠ¶æ³ç”»é¢åŸºæœ¬å®Ÿè£…
- å®šæœŸåŒæœŸå®Ÿè£…é–‹å§‹

### 8æœˆ14æ—¥ï¼ˆæ°´ï¼‰
- é¡§å®¢ãƒ‡ãƒ¼ã‚¿åŒæœŸå®Ÿè£…
- æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿åŒæœŸå®Ÿè£…
- åŒæœŸç”»é¢å®Œæˆ

### 8æœˆ15æ—¥ï¼ˆæœ¨ï¼‰
- æ‰‹å‹•åŒæœŸæ©Ÿèƒ½å®Ÿè£…
- WebhookåŒæœŸæº–å‚™
- E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…

### 8æœˆ16æ—¥ï¼ˆé‡‘ï¼‰
- å…¨æ©Ÿèƒ½çµ±åˆãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹æœ€é©åŒ–
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

## ðŸ“ å‚™è€ƒ

- ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Šã®ãŸã‚ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æŒ‡ç¤ºã‚‚è¿½åŠ æ¸ˆã¿
- ãƒ­ã‚®ãƒ³ã‚°å¼·åŒ–ã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹åŽé›†ã®å®Ÿè£…æŒ‡ç¤ºæ¸ˆã¿
- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã®ç¶™ç¶šã‚’æŽ¨å¥¨

---

**æ¬¡å›žä½œæ¥­é–‹å§‹:** 2025å¹´8æœˆ13æ—¥ï¼ˆç«ï¼‰9:00  
**å„ªå…ˆåº¦:** ãƒ‡ãƒ¼ã‚¿åŒæœŸæ©Ÿèƒ½ã®å®Œæˆ > ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° > ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ä»¥ä¸Š