# フロントエンド技術的負債リスト

作成日: 2025年8月2日  
作成者: YUKI

## 概要

フロントエンドコードベースの技術的負債を優先度別に分類したリストです。
8月8日のShopifyアプリストア申請に向けて、リリースブロッカーとなる項目を最優先で対応します。

## 優先度分類

### 🚨 緊急（リリースブロッカー）- 8/3までに対応必須

#### 1. JWTデコード機能の実装 ✅ 完了
- **状態**: 2025-08-02 実装完了
- **影響**: セキュリティ、マルチテナント機能
- **作業内容**: 
  - jwt-decodeパッケージの導入
  - デコード機能の実装
  - AuthClientへの統合

### 🔴 高優先度（来週対応）- 8/5-8/7

#### 1. 本番環境からテストページ削除
- **影響ファイル数**: 約20ファイル
- **影響**: セキュリティリスク
- **作業内容**:
  - `/app/api-test/`
  - `/app/database-test/`
  - `/app/dormant-api-test/`
  - `/app/year-over-year-api-test/`
  - `/app/test/`
  - `/app/debug/`
  - 各種テストページの削除またはビルド除外設定

#### 2. console.log文の削除
- **影響ファイル数**: 55ファイル
- **影響**: パフォーマンス、セキュリティ（情報漏洩リスク）
- **主要ファイル**:
  - `/src/lib/config/environments.ts`
  - `/src/lib/api-config.ts`
  - `/src/lib/api/year-over-year.ts`
  - `/src/stores/appStore.ts`
- **推奨**: 開発用ログは環境変数で制御

#### 3. エラーバウンダリーの実装
- **影響**: ユーザー体験、エラーハンドリング
- **作業内容**:
  - 統一されたエラーバウンダリーコンポーネント作成
  - 主要ページへの適用
  - エラー表示の統一

### 🟡 中優先度（再来週以降）- 8/12以降

#### 1. YearOverYearコンポーネント15個の統合
- **影響**: コード保守性、バンドルサイズ
- **ファイル**:
  - `YearOverYearProductAnalysis.tsx`
  - `YearOverYearProductAnalysisDetailed.tsx`
  - `YearOverYearProductAnalysisDetailedFixed.tsx`
  - 他12ファイル
- **推奨**: 1つの設定可能なコンポーネントに統合

#### 2. TypeScript any型の修正
- **影響ファイル数**: 42ファイル
- **影響**: 型安全性、実行時エラーリスク
- **主要ファイル**:
  - `/src/lib/error-handler.ts`
  - `/src/lib/api-client.ts`
  - `/src/lib/auth-client.ts`

#### 3. React.memoによる最適化
- **影響コンポーネント**:
  - `CustomerDashboard`
  - `SalesDashboard`
  - `AIInsightsDashboard`
  - `ProductPurchaseFrequencyAnalysis`
  - `MonthlyStatsAnalysis`
- **効果**: 不要な再レンダリング防止

### 🟢 低優先度（時間がある時）

#### 1. コード分割の実装
- **影響**: 初期ロード時間
- **作業内容**:
  - 動的インポートの導入
  - ルートベースの分割
  - 大きなライブラリの遅延ロード

#### 2. 仮想スクロールの導入
- **対象コンポーネント**:
  - 顧客リスト
  - 商品テーブル（一部実装済み）
  - 注文履歴
- **効果**: 大量データ表示時のパフォーマンス改善

#### 3. アクセシビリティ改善
- **現状**: 3ファイルのみARIA属性実装
- **作業内容**:
  - ARIA属性の追加
  - キーボードナビゲーション
  - スクリーンリーダー対応

#### 4. レスポンシブデザイン改善
- **現状**: 54ファイルのみレスポンシブ対応
- **作業内容**:
  - モバイル向けレイアウト最適化
  - テーブルのモバイル表示改善

## 作業見積もり

### Phase 1: リリース前（8/3-8/7）
- テストページ削除: 2時間
- console.log削除: 4時間
- エラーバウンダリー: 3時間
- **合計**: 約9時間

### Phase 2: リリース後改善（8/12以降）
- YearOverYearコンポーネント統合: 8時間
- TypeScript any型修正: 6時間
- React.memo最適化: 4時間
- **合計**: 約18時間

### Phase 3: 継続的改善
- コード分割: 8時間
- 仮想スクロール: 6時間
- アクセシビリティ: 12時間
- レスポンシブ: 8時間
- **合計**: 約34時間

## 推奨事項

1. **即時対応が必要**
   - 本番ビルドからテストページを除外する設定
   - 環境変数によるログ出力制御

2. **開発プロセスの改善**
   - ESLintルールでconsole.logを警告
   - TypeScript strictモードの段階的導入
   - コードレビューでの技術的負債チェック

3. **パフォーマンスモニタリング**
   - Lighthouseスコアの定期測定
   - バンドルサイズの監視
   - ランタイムパフォーマンスの計測

## まとめ

現在の技術的負債は管理可能な範囲内です。リリース前に対応すべき項目は限定的で、
主にセキュリティとコード品質に関わる部分です。リリース後は継続的な改善により、
保守性とパフォーマンスの向上を図ることができます。
