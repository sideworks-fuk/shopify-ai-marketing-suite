# Backlogチケット: プロダクト合計数表示と同期履歴改善

## タイトル
プロダクト合計数表示の修正と同期履歴改善

## 種別
バグ修正 / 改善

## 優先度
中

## 説明

### 問題1: 商品数カウントの不整合

**現象**:
- 商品管理画面で商品を削除しても、合計数が更新されない
- 例: 150個の商品を50個に減らした後、再同期しても150のまま表示される

**原因**:
- 削除後の再カウント処理に問題がある可能性
- 過去のデータが残っている可能性

**対応**:
- 商品数のカウントロジックを修正
- 削除された商品を除外してカウントする処理を実装

### 問題2: Shopify商品削除時の同期方法

**課題**:
- Shopify側で物理削除された商品データの同期方法が未確定
- 削除フラグが取得できるか確認が必要

**調査事項**:
- Shopify APIで削除フラグが取得できるか
- 物理削除か論理削除かを確認
- 削除された商品の同期方法を決定

**暫定方針**:
- サービス仕様として「Shopifyで削除されたデータはこちらも削除される」と明記
- 全データを再取得して同期する運用も検討
- 削除フラグが取得できる場合は、それを使用

**対応**:
- Shopify APIの仕様を調査
- 削除された商品の同期方法を決定
- 必要に応じて実装

### 問題3: 同期履歴の表示

**現象**:
- 同期履歴タブに履歴が表示されない
- 手動同期や初回同期を実行しても履歴が表示されない

**対応方針（要決定）**:
- オプション1: 同期履歴の表示を改善（履歴が正しく表示されるように修正）
- オプション2: 同期履歴タブ自体を削除

**対応**:
- 表示改善かタブ削除かを決定
- 決定に基づいて実装

## 完了条件
- [ ] 商品数カウントの問題を修正（削除後も正しくカウントされる）
- [ ] Shopifyの商品削除時の同期方法を調査・方針決定
- [ ] 同期履歴表示の方針を決定（表示改善 or タブ削除）
- [ ] 決定した方針に基づいて実装
- [ ] 動作確認完了

## 関連情報
- 注文データは論理削除（ステータスで管理）のため問題なし
- 商品データは物理削除される可能性があるため、対応が必要
