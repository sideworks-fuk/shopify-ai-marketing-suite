# 2025年7月28日 定例会議議事録

**日時**: 2025年7月28日  
**参加者**: 福田様、開発チーム（YUKI、TAKASHI、ケンジ）  
**作成者**: ケンジ

## 1. 開発環境の構成

### 1.1 環境構成の現状
- **本番環境（Production）**: 顧客向け本番サービス
- **ステージング環境（Staging）**: 本番リリース前の最終確認環境
- **プレビュー環境（Preview）**: 開発中機能の動作確認環境
- **開発環境（Development）**: 開発者向けデバッグ環境

### 1.2 インフラ移行状況
- **完了済み**:
  - EC2 → Azure App Service（バックエンドAPI）
  - 静的サイト → Azure Static Web Apps（フロントエンド）
  - データベース → Azure SQL Database
- **進行中**:
  - バッチ処理 → Azure Functions（コスト効率化のため）

### 1.3 開発者向け機能
- デバッグページへのアクセス: URLに「dev」と入力
- 開発者ブックマーク機能の実装済み

## 2. データ処理の課題と対応策

### 2.1 Shopify API制限への対応
**課題**:
- 1回のリクエスト: 最大250件
- レート制限: 2リクエスト/秒
- 大規模店舗（15万件の注文など）の初期インポートに時間がかかる

**対応策**:
- Azure Functionsによるバッチ処理実装
- 段階的データ取得（日次バッチで過去データを遡及取得）
- 初期セットアップ時のユーザー向け説明の充実
- プログレスバーやステータス表示の実装

### 2.2 データ取得戦略
- **初期インポート**: 直近3ヶ月分を優先取得
- **バックグラウンド処理**: 過去2年分を段階的に取得
- **差分更新**: 日次で新規・更新データのみ取得

## 3. UI/UX改善の実施項目

### 3.1 実装済み改善
- **スケルトンローダー**: データロード中の視覚的フィードバック
- **ページネーション**: 大量データの分割表示（50件/ページ）
- **ストア切り替え機能**: マルチストア対応の基盤

### 3.2 計画中の改善
- **仮想スクロール**: 大量データのスムーズな表示
- **フィルタリング機能**: 期間・商品カテゴリでの絞り込み
- **エクスポート機能**: CSV/Excel形式でのデータ出力

### 3.3 データ品質向上
- **システム商品の除外**:
  - 送料（配送料、shipping）
  - 代引手数料
  - その他手数料
- **休眠顧客の定義**:
  - 標準: 90日以上購入なし
  - カスタマイズ可能（30日、60日、180日）

## 4. パフォーマンス最適化

### 4.1 現状の課題
- 開発環境: Azure App Service F1（無料プラン）
- データベース: Basic tier（5 DTU）
- 大量データ処理時のレスポンス遅延

### 4.2 最適化施策
**バックエンド**:
- SQLクエリの最適化（実施済み）
- インデックスの追加（実施済み）
- キャッシュ戦略の実装（進行中）

**フロントエンド**:
- 遅延ローディングの実装
- コンポーネントの最適化
- 不要な再レンダリングの削減

### 4.3 本番環境の推奨スペック
- App Service: S1以上
- SQL Database: S0以上（10 DTU）
- 必要に応じてスケールアップ

## 5. 優先タスクと期限

### 5.1 今週中（7/29-8/2）【必須】
1. **Shopify OAuth 2.0認証の完成**
   - アクセストークン管理機能
   - リフレッシュトークン対応
   - マルチストア認証

2. **Azure Functionsバッチ処理基盤**
   - 初期データ同期機能
   - 差分更新機能
   - エラーハンドリング

### 5.2 来週（8/5-8/9）【重要】
3. **マルチストア管理機能**
   - ストア一覧管理
   - ストア別設定
   - データ分離の徹底

4. **フロントエンド最適化**
   - 仮想スクロール実装
   - 大量データ対応完成

### 5.3 Shopifyアプリ申請（8/8目標）
5. **申請準備**
   - ドキュメント整備
   - セキュリティ要件確認
   - デモ動画作成

## 6. カスタマイズ対応方針

### 6.1 標準機能（無料）
- 基本的な分析機能
- 標準的なグラフ・表表示
- 一般的なフィルタリング

### 6.2 有料カスタマイズ
- 業界特化型分析（例：カレー店の辛さレベル分析）
- 独自KPIの追加
- カスタムレポート機能
- API連携（他システムとの接続）

### 6.3 料金体系案
- **基本プラン**: 月額9,800円
- **プロプラン**: 月額19,800円（高度な分析機能）
- **エンタープライズ**: 個別見積もり（カスタマイズ込み）

## 7. 実顧客候補の状況

### 7.1 早稲田メーヤウ様
- **業種**: カレー専門店
- **特徴**: 2017年閉店→2018年復活のストーリー
- **要望**: 辛さレベル別分析、サブスクリプション管理
- **対応**: デモデータ作成済み、来週キックオフ予定

## 8. 次回アクションアイテム

| タスク | 担当 | 期限 | 優先度 |
|--------|------|------|--------|
| Shopify OAuth実装 | TAKASHI | 7/31 | 高 |
| Azure Functions設計 | ケンジ | 7/30 | 高 |
| 仮想スクロール実装 | YUKI | 8/2 | 中 |
| マルチストア管理UI | TAKASHI | 8/5 | 中 |
| 申請ドキュメント作成 | ケンジ | 8/6 | 高 |
| デモ動画撮影 | 全員 | 8/7 | 高 |

## 9. 懸念事項と対策

### 9.1 技術的懸念
- **Shopify API制限**: バッチ処理で対応
- **大量データ処理**: 段階的実装とキャッシュ活用
- **マルチテナント**: データ分離の徹底

### 9.2 ビジネス的懸念
- **競合他社**: 差別化機能の強化
- **価格設定**: 市場調査の実施
- **サポート体制**: FAQ・ドキュメント整備

## 10. 決定事項

1. **開発スケジュール前倒し**: OAuth認証とAzure Functionsを今週から開始
2. **早稲田メーヤウ様を最優先**: 8月8日のアプリ申請に向けて全力対応
3. **標準機能の定義**: 基本分析機能は全顧客に提供、業界特化は有料オプション

---

**次回定例**: 2025年8月4日（日）予定  
**議事録作成**: ケンジ（2025年7月28日）