# 2025-08-12 定例 議事録（ECレンジャー）

## 会議情報
- 会議日時: 2025年8月12日
- 参加者: 小野、浜地、福田

# 会議議事録（準備用）- EC Ranger 開発進捗確認 / 本番リリース準備

## 会議情報
- 日時: 2025年8月12日 15:30（予定）
- 参加者: 小野、浜地、福田
- 議題: 本番リリース準備の進捗確認と直近クリティカル事項の合意

## 参考（前回 250804_会議議事録 の要点）
- アプリ名: EC Ranger に正式決定（全体反映タスクあり）
- 申請準備: 法的文書ドラフト、申請素材準備、技術要件のうち「アンインストール」未実装
- 価格設定: Shopifyの価格設定方法確認後に最終決定（本日アクション）

---

## アジェンダ（提案）
1. 先週から本日までの進捗サマリー（5分）
   - OAuth認証フロー完全復旧／リダイレクト問題の恒久対策（Frontend.BaseUrl/SHOPIFY_FRONTEND_BASEURL）
   - データ同期基盤（Hangfire）実装着手、ダッシュボード骨子実装
   - GitHub Workflow: 手動デプロイ運用へ統一
2. クリティカル確認事項（15分）
   - 価格プラン暫定決定（無料プラン有無／月額帯）
   - データ同期の最小完了スコープ（初回同期の対象範囲と完了定義）
   - アンインストール処理の実装と検証計画
3. リリース計画と依存関係（10分）
   - マイグレーション適用フローとトラッキング運用
   - ステージング→本番の切替条件・承認者
   - スクリーンショット作成・差し替えの段取り
4. リスクと対策（10分）
   - レート制限/429時の再試行とバックオフ
   - Hangfire Dashboard 認可設定・運用
   - 環境変数の不整合・CI変数の統一
5. 決定事項の確認（5分）
6. 次アクション・担当と期限（5分）

---

## 本日確認ポイント（チェックリスト）
- [ ] 価格プラン（案）
  - [ ] ベース価格帯（例: $29/$49/$99）
  - [ ] 無料/トライアルの有無
  - [ ] 課金モデル（定額/従量/ハイブリッド）
- [ ] 技術要件の達成状況
  - [ ] OAuth認証（復旧済み）
  - [ ] GDPR Webhooks（4種）
  - [ ] アンインストール機能（未/進行/完了）
  - [ ] データ同期（初回同期の完了定義とメトリクス）
- [ ] インフラ/運用
  - [ ] GitHub Workflows（手動デプロイ化周知）
  - [ ] Azure App Settings（SHOPIFY_FRONTEND_BASEURL 等）
  - [ ] 監視/Application Insights（主要シグナル定義）
- [ ] ドキュメント/申請素材
  - [ ] プライバシーポリシー/利用規約 最終化フロー
  - [ ] アプリ説明文/スクショ進捗

---

## 現在の進捗サマリー（資料反映）
- OAuth/HMAC/SSL/設定不一致を解消し、インストール→認証→トークン保存まで通過
- 同期基盤（Hangfire、KeepAlive、進捗・範囲・履歴管理）実装中。初回同期の運用定義を決める必要
- FEダッシュボード骨子完了、API統合を進行中。30秒ポーリングで進捗表示
- CI/CDは手動デプロイに統一。環境変数/Secretsの確認が必要

---

## 本日決めたいこと（合意事項）
- 価格プランの暫定決定（申請準備を進めるため）
- 初回同期の完了条件（対象期間・メトリクス・タイムアウト）
- アンインストール実装の責任者と期限
- 画像/文言素材の確定スケジュール

---

## 次アクション（ドラフト）
- 小野: 価格プラン案の確定（本日中）
- 小野: アイコン/スクショの初稿提出（翌営業日）
- 福田: 開発DBに最新マイグレーション適用→初回同期の最小成功（本日）
- 福田: ダッシュボードに進捗/履歴/トリガーを可視化（本日）
- 福田: 申請チェックリスト整備・不足確認（本日）

---

## アクションアイテム（最新タスク表）

| タスク | 期限 | 担当 | 状況 | 備考 |
|---|---|---|---|---|
| データ同期機能実装（Hangfire） | 8/13 | 福田 | 🔄 進行中 | 初回同期の完了定義要確認 |
| GDPR Webhooks実装（4種類） | 8/14 | 福田 | ❌ 未着手 | 仕様テンプレあり（1日想定） |
| アンインストール処理実装 | 8/14 | 福田 | ❌ 未着手 | 申請必須要件 |
| 開発ページの本番除外 | 8/13 | 福田 | ❌ 未着手 | build 時除外とルーティング整理 |
| 価格プラン決定 | 8/13 | 小野 | ❌ 未決定 | 無料/有料/課金モデルの確定 |
| 利用規約 最終化 | 8/15 | 小野 | 📋 ドラフト有 | 法務レビュー必要 |
| プライバシーポリシー 最終化 | 8/15 | 小野 | 📋 ドラフト有 | GDPR整合性確認 |
| サポートメールアドレス設定 | 8/14 | 小野 | ❌ 未設定 | support@〜 |
| アプリアイコン作成（1024x1024） | 8/15 | デザイナー | ❌ 未着手 | Shopify規格準拠 |
| カバー画像作成（1920x1080） | 8/15 | デザイナー | ❌ 未着手 | 申請素材 |
| スクリーンショット作成（5枚以上） | 8/16 | 小野/開発 | ❌ 未着手 | デモ環境で撮影 |
| アプリ説明文（日本語） | 8/14 | 小野/マーケ | ❌ 未着手 | SEOキーワード選定 |
| カスタマーサポート体制 | 8/16 | 小野 | ❌ 未構築 | 窓口/時間/担当の決定 |
| FAQ 作成（10項目） | 8/16 | 小野 | ❌ 未着手 | 申請後も継続更新 |
| 監視・アラート設定 | 8/15 | 福田 | ⚠️ 部分的 | Application Insights |

---

## 参考資料リンク
- `docs/01-project-management/00_meeting/250804_会議議事録.md`
- `docs/01-project-management/01-planning/2025-08-12-work-plan.md`
- `docs/01-project-management/01-planning/2025-08-12-work-completion-report.md`
- `docs/04-development/shopify-app-installation-master-guide.md`
- `docs/04-development/deployment/azure-environment-variables-setup.md`
- `docs/04-development/hmac-verification-debug-guide.md`

---

## 会議メモ（当日記入欄）

### 決定事項（本日）
- 課金モデルは月額サブスクリプションをベースにする（無料トライアル付与を検討）。詳細価格帯は小野さんが確定（候補: $50/$80/$100）。
- 利用規約/プライバシーポリシーはコーデンベルクの現行規約をベースに、Shopify連携・DM関連を追記して準備。弁護士レビュー前提。
- ドメインは当面未取得（Azure 既存URLを使用）。
- 来週の申請を目標に進行（課金API方針の合意と最小実装を含む）。

### 議論要約
- 課金API（Shopify Billings）について:
  - アプリは「購読（Subscription）」/「従量（Usage）」/「ワンタイム（One-time）」のいずれか1つ以上が実装可能。
  - 最小構成は「月額購読+無料トライアル」。トリガー（どの操作で課金フローに遷移するか）をアプリ内UIで定義が必要。
  - 従量課金は使用量レコードの設計と記録が必要なため、初期は見送り候補。
- 利用規約:
  - コーデンベルク規約に準拠し、Shopify連携/DM/スクレイピング禁止等の条項を反映。将来のDMフル版にも対応できる骨子で作成。
- 実装/運用:
  - アンインストール/GDPR対応は申請必須要件。初回同期・ダッシュボードはブラッシュアップ継続。
  - 本番から開発用ブックマークを不可視化。ロゴはShopify推奨サイズに準拠。
  - インストール/アンインストールの状態管理は自前DBで追跡（履歴の整合は要追加調査）。

### アクション（担当/期限）
- 福田: 課金API（Subscription中心）技術調査→最小実装方針（トリガー/フロー/無料トライアル日数）を資料化（8/13）
- 小野: 価格帯最終決定と課金方針承認（8/13）/ Shopifyパートナー側の決済カード手当て（至急）
- 浜地: ロゴ（推奨サイズ/アセット一式）とスクリーンショット初稿（8/15）/ サポートメール運用準備
- 福田: アンインストール/GDPR Webhooks 実装・検証（8/14）/ 開発ページ本番除外（8/13）/ インストール状態管理API整備（8/14）
- 福田: ダッシュボードUIの進捗/履歴/トリガー可視化、申請用スクショ想定画面ブラッシュアップ（8/15）
- 浜地: Taniguchiさんへバックログと関連ドキュメントアクセス付与（至急）

### 未決事項/要調査
- 無料トライアル日数（14日/30日）/ 課金開始タイミングの仕様確定
- 連携対象カテゴリの選択（申請時のカテゴリ/対象アプリの指定）
- 申請時に要求される課金APIの実装レベル（最小要件の確認）
- 公式サイト/説明ページの要否（当面は未作成の方針だが将来対応）

### 参考メモ（原文要点の反映）
- 「課金APIはモデルを選び、アプリのどの操作で呼ぶかの設計が必要」
- 「コーデンベルク規約ベースで、Shopify連携・DMを初期から含める」
- 「商標: EC Ranger は申請可能。5年で進める」
- 「サポートメールはXserverで作成済（support/info）」
- 「ロゴ推奨サイズに合わせる。ファビコンも揃える」
