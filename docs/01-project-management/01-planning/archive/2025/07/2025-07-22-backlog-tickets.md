# Backlog チケット一覧

## ✅ 完了済み作業

### 🎯 **LOGS-001: ログシステム強化と運用監視機能追加** - 完了
**優先度**: 🔴 Critical  
**担当**: 福田 + AI Assistant  
**完了日**: 2025年7月20日  
**所要時間**: 1時間  

#### 件名
```
ログシステム強化と運用監視機能追加（Application Insights統合・ヘルスチェック・パフォーマンス監視）
```

#### 本文
```
## 概要
Azure App Serviceでの運用監視を強化するため、包括的なログシステムを実装しました。

## 実装内容
- Application Insights接続設定の改善（環境変数対応）
- パフォーマンス監視の強化（遅い処理自動検出）
- ヘルスチェック機能の実装（/health, /health/ready）
- ログ拡張機能の実装（環境情報自動付与）
- 運用向けドキュメントの作成（ログクエリテンプレート）

## 成果物
- セキュアな設定管理（環境変数による接続文字列管理）
- パフォーマンス監視（1秒/5秒閾値での自動検出）
- ヘルスチェック（データベース接続確認とパフォーマンス測定）
- ログ拡張（環境情報、バージョン、デプロイメント情報の自動付与）
- 運用支援（ログクエリテンプレートと設定手順ドキュメント）

## 技術詳細
- NuGetパッケージ: Microsoft.ApplicationInsights.AspNetCore, Serilog.AspNetCore
- 新規ファイル: LoggingHelper.cs, GlobalExceptionMiddleware.cs, DatabaseHealthCheck.cs
- 設定ファイル: appsettings.Production.json（環境変数対応）
- ドキュメント: LogQueries.md（Application Insights用クエリテンプレート）

## 次のステップ
1. 本番環境でApplication Insights接続文字列を設定
2. Azure App Serviceの可用性監視でヘルスチェックを活用
3. 提供したクエリテンプレートでログ分析を効率化
```

---

## 🔄 進行中・予定作業

### 🎯 **PROD-001: 前年同月比【商品】機能実装・テスト** - 予定
**優先度**: 🔴 Critical  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年7月下旬〜8月上旬  
**見積時間**: 5週間  

#### 件名
```
前年同月比【商品】機能実装・テスト（Shopify Private App連携・PostgreSQL・.NET Web API）
```

#### 本文
```
## 概要
Shopifyデータを活用した前年同月比分析機能を実装し、商品売上の年次比較を可能にします。

## 実装内容
- Shopify Private App構築（read_all_ordersスコープ自動付与）
- .NET Web API基盤構築（PostgreSQL、Entity Framework）
- データ集計機能（日次バッチ、月次集計、前年同月比計算）
- フロントエンド連携（React/Next.js）
- テスト・最適化（単体テスト、統合テスト、パフォーマンステスト）

## 技術スタック
- バックエンド: .NET 8 Web API、PostgreSQL、Entity Framework Core
- フロントエンド: React 18、Next.js 15、TypeScript
- Shopify API: GraphQL Admin API、Bulk Operations API
- インフラ: Azure App Service、Azure SQL Database

## リスク要因
- Shopify API制約（60日データ制限、レート制限）
- 大量データ処理（Bulk Operations API活用）
- パフォーマンス要件（1.5秒以内レスポンス）

## 成果物
- 前年同月比分析画面
- 商品別売上比較機能
- 月次トレンド分析
- データエクスポート機能
```

### 🎯 **CUST-001: 休眠顧客【顧客】機能実装・テスト** - 予定
**優先度**: 🟡 High  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年8月中旬〜下旬  
**見積時間**: 3週間  

#### 件名
```
休眠顧客【顧客】機能実装・テスト（顧客セグメンテーション・リエンゲージメント分析）
```

#### 本文
```
## 概要
一定期間購入していない顧客を特定し、リエンゲージメント戦略を支援する機能を実装します。

## 実装内容
- 顧客セグメンテーション機能（休眠期間別分類）
- 休眠顧客リスト表示・検索機能
- リエンゲージメント分析（購入パターン分析）
- 顧客詳細情報表示
- データエクスポート機能

## 技術要件
- 顧客データ分析（購入履歴、最終購入日）
- セグメンテーションアルゴリズム
- パフォーマンス最適化（大量顧客データ処理）
- プライバシー配慮（個人情報保護）

## 成果物
- 休眠顧客分析画面
- 顧客セグメンテーション機能
- リエンゲージメント戦略支援ツール
```

### 🎯 **PURCH-001: 月別売上統計【購買】機能実装・テスト** - 予定
**優先度**: 🟡 High  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年8月下旬〜9月上旬  
**見積時間**: 3週間  

#### 件名
```
月別売上統計【購買】機能実装・テスト（購買パターン分析・トレンド分析）
```

#### 本文
```
## 概要
月別の売上統計と購買パターン分析機能を実装し、売上トレンドの把握を支援します。

## 実装内容
- 月別売上統計ダッシュボード
- 購買パターン分析（季節性、トレンド）
- 売上予測機能（簡易版）
- 比較分析機能（月次・年次比較）
- データ可視化（グラフ・チャート）

## 技術要件
- 時系列データ分析
- 統計分析機能
- データ可視化（Chart.js/D3.js）
- リアルタイムデータ更新

## 成果物
- 月別売上統計画面
- 購買パターン分析機能
- 売上トレンド分析
- データ可視化ダッシュボード
```

### 🎯 **SHOP-001: Shopifyインストールストア管理 設計・実装** - 予定
**優先度**: 🟢 Medium  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年9月中旬〜下旬  
**見積時間**: 2週間  

#### 件名
```
Shopifyインストールストア管理 設計・実装（マルチテナント対応・OAuth自動化）
```

#### 本文
```
## 概要
複数のShopifyストアを管理し、インストール・設定を効率化する管理機能を実装します。

## 実装内容
- マルチテナント対応設計
- OAuth 2.0自動化（インストールリンク生成）
- ストア管理ダッシュボード
- 設定管理機能
- 監視・アラート機能

## 技術要件
- マルチテナントアーキテクチャ
- OAuth 2.0実装
- データベース設計（テナント分離）
- セキュリティ強化

## 成果物
- ストア管理ダッシュボード
- OAuth自動化機能
- マルチテナント対応
- 監視・アラート機能
```

### 🎯 **DEV-001: GitHub Workflow環境分離 設計・実装** - 予定
**優先度**: 🟢 Medium  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年9月下旬〜10月上旬  
**見積時間**: 1週間  

#### 件名
```
GitHub Workflow環境分離 設計・実装（develop/staging/production環境構築）
```

#### 本文
```
## 概要
開発・ステージング・本番環境を分離し、安全なデプロイメントパイプラインを構築します。

## 実装内容
- GitHub Actions Workflow設計
- 環境別設定管理
- 自動テスト・デプロイメント
- セキュリティ強化
- 監視・ログ統合

## 技術要件
- GitHub Actions
- Azure App Service（複数環境）
- 環境変数管理
- セキュリティ設定

## 成果物
- 自動化されたデプロイメントパイプライン
- 環境分離された開発・運用体制
- セキュアなCI/CDプロセス
```

### 🎯 **SEC-001: CORS問題解決とセキュリティ改善** - 予定
**優先度**: 🟢 Medium  
**担当**: 福田 + AI Assistant  
**予定期間**: 2025年10月中旬  
**見積時間**: 3日  

#### 件名
```
CORS問題解決とセキュリティ改善（クロスオリジン設定・セキュリティヘッダー強化）
```

#### 本文
```
## 概要
CORS設定の最適化とセキュリティヘッダーの強化により、セキュアなAPI運用を実現します。

## 実装内容
- CORS設定の最適化
- セキュリティヘッダー追加
- 認証・認可の強化
- レート制限実装
- セキュリティ監査

## 技術要件
- CORS設定（環境別）
- セキュリティヘッダー
- 認証・認可
- レート制限

## 成果物
- セキュアなAPI設定
- 環境別CORS設定
- セキュリティ監査レポート
```

---

## 📊 優先度別サマリー

### 🔴 Critical（最優先）
1. **PROD-001**: 前年同月比【商品】機能実装・テスト

### 🟡 High（高優先）
2. **CUST-001**: 休眠顧客【顧客】機能実装・テスト
3. **PURCH-001**: 月別売上統計【購買】機能実装・テスト

### 🟢 Medium（中優先）
4. **SHOP-001**: Shopifyインストールストア管理 設計・実装
5. **DEV-001**: GitHub Workflow環境分離 設計・実装
6. **SEC-001**: CORS問題解決とセキュリティ改善

---

## 📅 スケジュール概要

### 2025年7月
- ✅ **LOGS-001**: ログシステム強化（完了）

### 2025年8月
- 🔄 **PROD-001**: 前年同月比機能実装（5週間）
- 🔄 **CUST-001**: 休眠顧客機能実装（3週間）

### 2025年9月
- 🔄 **PURCH-001**: 月別売上統計機能実装（3週間）
- 🔄 **SHOP-001**: Shopifyストア管理実装（2週間）

### 2025年10月
- 🔄 **DEV-001**: GitHub Workflow環境分離（1週間）
- 🔄 **SEC-001**: CORS・セキュリティ改善（3日）

---

*最終更新: 2025年7月20日*
*作成者: AI Assistant* 