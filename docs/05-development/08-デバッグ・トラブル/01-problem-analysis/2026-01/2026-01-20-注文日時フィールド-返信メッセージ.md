# 注文日時フィールド参照先確認 - 返信メッセージ

**作成日**: 2026-01-20  
**宛先**: 中川 寛人 様

---

## 返信メッセージ（Backlog用）

```
ありがとうございます。
現状は`createdAt`を使用していました。
現状の実装ではGraphQLではなくREST APIで取得していましたので`processedAt`が含まれておらず取得できていませんでした。

GraphQLで取得するように変更するか検討します。
```

---

## 補足情報

### 現在の実装詳細

- **使用API**: Shopify REST API
- **取得フィールド**: `created_at`のみ
- **保存フィールド**: `ShopifyCreatedAt`（`created_at`の値）
- **分析での使用**: `ShopifyCreatedAt ?? CreatedAt`

### 影響範囲

以下の機能で`createdAt`を使用しています：

1. 休眠顧客の判定（最終注文日）
2. 期間集計（日次、月次、年次）
3. 前年同月比分析
4. 購入回数分析
5. ダッシュボードの売上集計

### 次のステップ

GraphQL APIへの移行を検討する場合：

1. Shopify Admin GraphQL APIから`processedAt`を取得
2. `Order`エンティティに`ShopifyProcessedAt`フィールドを追加
3. マイグレーションを作成
4. 分析処理で`ShopifyProcessedAt`を優先的に使用
