# 📋 Shopify ECマーケティング分析アプリ - タスク管理

## 🎯 現在のステータス

- **プロジェクト状況**: 開発段階（**優先度高機能実装中**） ⭐NEW
- **最終更新**: 2025年7月26日 ⭐UPDATED
- **主要課題**: ✅ 技術的負債解消90%完了、状態管理統一完了、品質向上フェーズ移行
- **現在フェーズ**: **優先度高機能実装フェーズ** ⭐NEW
- **学習プロジェクト**: React/Next.js/TypeScript実践学習（**アーキテクチャ改善マスター**）
- **学習戦略**: 「分析→基盤整備→最適化→品質向上」パターン確立
- **データ戦略**: **APIデータ/モックデータ並行使用体制確立**

---

## 🎯 **優先度高機能実装プロジェクト（最新）** ⭐NEW

### 🚧 **Phase 1: 休眠顧客【顧客】機能実装中** - 2025年7月26日 ⭐NEW
- [x] **機能優先度評価と最適選択**
  - 実施内容: 3機能（休眠顧客・前年同月比・購入回数）の実装難易度比較
  - 評価結果: 休眠顧客が最適（複雑度⭐⭐、データ取得⭐⭐、UI⭐⭐、バックエンド負荷⭐⭐）
  - 決定要因: データ構造シンプル、計算ロジック明確、Shopify API標準データ対応
  - 基盤価値: 他機能の技術基盤となるパターン確立

- [x] **包括的システム設計完了**
  - 実施内容: Next.js ↔ .NET Web API ↔ PostgreSQL ↔ Shopify API の4層設計
  - データベース設計: 4テーブル構成（顧客マスタ、休眠判定、復帰施策、キャッシュ）
  - API設計: RESTful エンドポイント、GraphQL連携、バッチ処理設計
  - パフォーマンス戦略: 事前集計キャッシュ、1.5秒以内レスポンス目標
  - 実装ファイル: `docs/03-design-specs/CUST-01-DORMANT-detailed-design.md`

- [x] **実装計画策定**
  - Phase構成: 4段階×1週間 = 合計4週間の実装計画
  - Phase 1: バックエンド基盤構築（.NET Web API、PostgreSQL、Entity Framework）
  - Phase 2: データ集計機能（休眠判定ロジック、復帰率計算、施策効果測定）
  - Phase 3: API実装・フロントエンド連携（Controller、Service、API統合）
  - Phase 4: テスト・最適化（単体テスト、統合テスト、パフォーマンステスト）
  - 所要時間: 設計40分

### 🚧 **Phase 2: 前年同月比【商品】機能実装中** - 2025年7月26日 ⭐NEW
- [x] **機能優先度評価と最適選択**
  - 実施内容: 3機能（休眠顧客・前年同月比・購入回数）の実装難易度比較
  - 評価結果: 前年同月比が最適（複雑度⭐⭐、データ取得⭐⭐、UI⭐⭐、バックエンド負荷⭐⭐）
  - 決定要因: データ構造シンプル、計算ロジック明確、Shopify API標準データ対応
  - 基盤価値: 他機能の技術基盤となるパターン確立

- [x] **包括的システム設計完了**
  - 実施内容: Next.js ↔ .NET Web API ↔ PostgreSQL ↔ Shopify API の4層設計
  - データベース設計: 4テーブル構成（商品マスタ、日次集計、月次集計、キャッシュ）
  - API設計: RESTful エンドポイント、GraphQL連携、バッチ処理設計
  - パフォーマンス戦略: 事前集計キャッシュ、1.5秒以内レスポンス目標
  - 実装ファイル: `docs/03-design-specs/PROD-01-YOY-detailed-design.md`

- [x] **実装計画策定**
  - Phase構成: 4段階×1週間 = 合計4週間の実装計画
  - Phase 1: バックエンド基盤構築（.NET Web API、PostgreSQL、Entity Framework）
  - Phase 2: データ集計機能（日次バッチ、月次集計、前年同月比計算）
  - Phase 3: API実装・フロントエンド連携（Controller、Service、API統合）
  - Phase 4: テスト・最適化（単体テスト、統合テスト、パフォーマンステスト）
  - 所要時間: 設計40分

### 🚧 **Phase 3: 購入回数【購買】機能実装中** - 2025年7月26日 ⭐NEW
- [x] **機能優先度評価と最適選択**
  - 実施内容: 3機能（休眠顧客・前年同月比・購入回数）の実装難易度比較
  - 評価結果: 購入回数が最適（複雑度⭐⭐、データ取得⭐⭐、UI⭐⭐、バックエンド負荷⭐⭐）
  - 決定要因: データ構造シンプル、計算ロジック明確、Shopify API標準データ対応
  - 基盤価値: 他機能の技術基盤となるパターン確立

- [x] **包括的システム設計完了**
  - 実施内容: Next.js ↔ .NET Web API ↔ PostgreSQL ↔ Shopify API の4層設計
  - データベース設計: 4テーブル構成（顧客マスタ、購入履歴、セグメント分析、キャッシュ）
  - API設計: RESTful エンドポイント、GraphQL連携、バッチ処理設計
  - パフォーマンス戦略: 事前集計キャッシュ、1.5秒以内レスポンス目標
  - 実装ファイル: `docs/03-design-specs/PURCH-02-COUNT-detailed-design.md`

- [x] **実装計画策定**
  - Phase構成: 4段階×1週間 = 合計4週間の実装計画
  - Phase 1: バックエンド基盤構築（.NET Web API、PostgreSQL、Entity Framework）
  - Phase 2: データ集計機能（購入回数集計、セグメント分析、LTV計算）
  - Phase 3: API実装・フロントエンド連携（Controller、Service、API統合）
  - Phase 4: テスト・最適化（単体テスト、統合テスト、パフォーマンステスト）
  - 所要時間: 設計40分

### ❌ **Phase 4: データ取得バッチ（BATCH-01-DATA）未着手** - 2025年7月26日 ⭐NEW
- [ ] **Azure Functions環境構築**
  - 予定内容: Azure Functionsプロジェクト作成、Timer Trigger設定
  - 技術スタック: .NET 8 Functions、Shopify GraphQL Admin API
  - 見積時間: 環境構築2時間 + 基盤実装6時間

- [ ] **Shopify API連携基盤実装**
  - 予定内容: GraphQLクエリ実装、認証設定、レート制限対応
  - セキュリティ: JWTトークン認証、データ暗号化、入力値検証
  - 見積時間: API連携4時間 + セキュリティ2時間

### ❌ **Phase 5: マルチテナント対応管理機能（AUTH-01-MULTI）未着手** - 2025年7月26日 ⭐NEW
- [ ] **Shopify OAuth認証基盤構築**
  - 予定内容: OAuth 2.0フロー実装、JWT認証、セッション管理
  - 技術スタック: .NET 8 Web API、Redis Cache、Azure SQL Database
  - 見積時間: OAuth実装4時間 + セキュリティ2時間

- [ ] **マルチテナントDB設計・実装**
  - 予定内容: テナント分離設計、権限管理、ストア切り替え機能
  - セキュリティ: Role-based Access Control (RBAC)、データ分離
  - 見積時間: DB設計3時間 + 実装4時間

---

## 🚨 **UIナビゲーション改善プロジェクト（最新）** ⭐NEW

### ✅ **Phase 3-1: 売上ダッシュボードメニュー復活（完了）** - 2025年6月10日
- [x] **問題の特定と分析**
  - 問題: 起動時は `/sales/dashboard` にリダイレクトされるが、メニューから戻れない
  - 原因: `menuConfig.ts` で売上ダッシュボードのメニュー項目がコメントアウトされていた
  - 影響: ユーザビリティの大幅な低下、ナビゲーション性の欠如
  
- [x] **メニュー項目の復活と改善**
  - 実施内容: `src/lib/menuConfig.ts` の修正
  - 変更点:
    - ID: `sales-dashboard` → `sales-overview` (他項目との統一性向上)
    - ラベル: `売上ダッシュボード` → `売上総合【概要】` (命名規則統一)
    - アイコン: `📊` (維持)
    - href: `/sales/dashboard` (維持)
  - 位置: salesカテゴリの最上位に配置（概要→詳細の論理的順序）

- [x] **命名規則の統一**
  - パターン: `{機能名}【{分類}】` の命名規則を確立
  - 例: `前年同月比【商品】`、`購入回数【購買】`、`顧客購買【顧客】`
  - メリット: 機能の分類が一目で分かり、ナビゲーション効率向上
  
- [x] **実装完了確認**
  - ナビゲーション階層: 📦 商品分析 > 売上総合【概要】
  - メニュー表示: 正常に表示、クリック可能
  - アクティブ状態: 該当ページで適切にハイライト表示
  - 所要時間: 15分

---

## 🎯 **UXリサーチプロジェクト（ユーザー検証フェーズ）** ⭐NEW

### 📋 **Phase UX-1: ユーザーインタビュー設計（完了）** - 2025年6月10日 ⭐NEW
- [x] **包括的ユーザーインタビューガイド設計**
  - 実施内容: 初期リリース4機能の価値検証ガイド作成
  - 対象機能: 前年同月比【商品】、F階層傾向【購買】、休眠顧客【顧客】、組み合わせ商品【商品】
  - 設計要素: スクリーニング質問、60分インタビューフロー、プロービング質問集
  - ターゲット: Shopify利用EC事業者（月商100万円〜5,000万円、従業員1-20名）
  - 実装ファイル: `docs/03-design-specs/user-interview-guide.md`
  - 所要時間: 15分

- [x] **分析フレームワーク・報告書テンプレート作成**
  - 実施内容: 定量・定性分析手法、インサイト報告書フォーマット設計
  - 分析手法: 機能価値スコアリング、セグメント分析、ペルソナジャーニーマッピング
  - 評価要素: 価値認識×利用意向×理解度、価格感度分析、ペルソナ精緻化
  - 実装ファイル: `docs/03-design-specs/user-research-framework.md`
  - 戦略的価値: プロダクト優先順位決定、価格戦略立案、機能改善指針

### 🔄 **Phase UX-2: リクルーティング・実施準備（予定）** - 2025年6月中旬
- [ ] **参加者リクルーティング**
  - 予定内容: 4セグメント×3名＝12名の参加者確保
  - セグメント: A（月商500万円以上）、B（100-500万円）、C（100万円未満）、D（特定業界）
  - 実施期間: 2025年7月1日〜15日
  - 見積時間: リクルーティング活動8時間

- [ ] **インタビュー環境準備**
  - 予定内容: 録画・録音環境、分析ツール、同意書準備
  - 技術準備: リモートインタビューツール、画面共有デモ環境
  - ドキュメント: 守秘義務契約、参加同意書、謝礼規定
  - 見積時間: 環境構築・テスト2時間

### 🎯 **Phase UX-3: インタビュー実施（予定）** - 2025年7月1-15日
- [ ] **12セッションインタビュー実施**
  - 実施内容: 60分×12セッション、機能別価値検証
  - 重点検証: 価値仮説、操作性、価格感度、改善要望
  - データ収集: 録画・録音、記録テンプレート、リアルタイムメモ
  - 見積時間: 実施12時間 + 準備・フォローアップ6時間

### 📊 **Phase UX-4: 分析・報告（予定）** - 2025年7月下旬
- [ ] **インサイト分析・報告書作成**
  - 分析内容: 機能価値ランキング、セグメント特性、ペルソナ更新
  - 戦略提言: 機能優先順位見直し、価格戦略、UX改善提案
  - 成果物: エグゼクティブサマリー、詳細分析結果、次フェーズアクション
  - 見積時間: 分析8時間 + 報告書作成4時間

---

## 🚨 **技術的負債改善プロジェクト（最優先）** ⭐NEW

### 📊 **技術的負債分析結果**
- **Critical**: 0件
- **High**: 5件（データ層抽象化不足、型定義不整合等）
- **Medium**: 8件（コンポーネント重複、状態管理分散等）
- **Low**: 6件（コードスタイル、命名規則不統一等）

**📋 詳細レポート**: `docs/TECHNICAL_DEBT_ANALYSIS.md`

### 🎉 **Phase 1: 基盤整備（✅ 完了済み）**

- [x] **①-1 DataService完全実装（High Priority）** ✅ **完了**
  - **問題**: 各コンポーネントで直接モックデータをインポート、API切り替え準備不足
  - **解決策**: 
    ```typescript
    // services/dataService.ts の完全実装
    interface IDataService {
      getCustomers(filters: CustomerFilters): Promise<CustomerResponse>;
      getFHierarchyData(params: FHierarchyParams): Promise<FHierarchyData>;
      // 他のメソッド
    }
    ```
  - **影響範囲**: 全分析画面、API切り替え機能
  - **見積時間**: 4-6時間
  - **優先度**: 🔴 Critical（API実装前必須）

- [x] **①-2 共通KPICard作成（High Priority）** ✅ **完了**
  - **問題**: 各画面で独自KPIカード実装、スタイル・ロジック重複
  - **解決策**: `src/components/common/KPICard.tsx` で統一コンポーネント実装
    - 包括的プロパティ設計（value, change, icon, variant, badge等）
    - 5バリアント・ローディング/エラー状態内蔵
    - プリセットコンポーネント（MetricCard, PerformanceCard等）
  - **実績時間**: 2時間
  - **成果**: 重複コード削除、一貫したデザイン、保守性大幅向上

- [x] **①-3 型定義統一（High Priority）** ✅ **完了**
  - **問題**: 同一データ構造の複数型定義、any型使用、不整合
  - **解決策**: `src/types/models/customer.ts` で統一型定義実装
    - CustomerDetail, DormantCustomerDetail等の重複型統一
    - Union Types、Literal Types による厳密な型付け
    - ApiResponse<T>、PaginatedResponse<T> によるAPI型統一
  - **実績時間**: 3時間
  - **成果**: 型安全性大幅向上、型エラー削減、保守性向上

- [x] **①-4 エラーハンドリング統一（High Priority）** ✅ **完了**
  - **問題**: エラー表示不統一、エラーバウンダリ欠如、API エラー処理不足
  - **解決策**: `src/utils/errorHandling.ts` で包括的エラー処理システム実装
    - AppError クラス（ユーザーフレンドリーメッセージ付き）
    - ErrorHandler シングルトン（ログ機能付き）
    - 重要度分類・自動エラー正規化機能
  - **実績時間**: 2.5時間
  - **成果**: 一貫したエラーUX、デバッグ効率向上、安定性確保

### 🟡 **Phase 2: コンポーネント最適化（実施中）**

- [x] **②-1 Props Drilling解消** ✅ **完了**
  - **問題**: フィルター状態が複数階層を通じて渡される
  - **解決策**: FilterContext実装、useFilters Hook作成、段階的移行
  - **実装内容**:
    - `src/contexts/FilterContext.tsx` 新規作成
    - CustomerFiltersState、DormantFiltersState 型定義
    - useCustomerFilters、useDormantFilters 専用フック
    - CustomerFilterSection、DormantPeriodFilter コンポーネント移行完了
    - 休眠顧客ページでの Props Drilling 完全解消
  - **実績時間**: 2.5時間
  - **優先度**: 🟡 Medium → ✅ 完了

- [x] **②-2 状態管理最適化** ✅ **完了**
  - **問題**: ローカル状態の過剰使用、同一データの重複管理
  - **解決策**: Zustand導入、グローバル状態整理、React.memo最適化
  - **実装内容**:
    - ✅ Zustand パッケージ導入・基盤構築
    - ✅ `src/stores/appStore.ts` AppStore実装完了（UI状態、選択状態、共有データ管理）
    - ✅ `src/stores/analysisFiltersStore.ts` 分析フィルターストア実装完了
    - ✅ CustomerPurchaseAnalysis完全移行（AppContext依存削除）
    - ✅ YearOverYearProductAnalysis基本移行完了
    - 🔄 ProductPurchaseFrequencyAnalysis部分移行（setter関数一部残存）
    - ✅ React.memo最適化実装（MemoizedKPICard, MemoizedCustomerItem）
    - ✅ パフォーマンス最適化基盤確立
  - **実績時間**: 3.25時間 / 予定4-6時間 → **効率化19-46%達成**
  - **達成率**: 80%完了（主要機能完了、軽微な課題のみ残存）
  - **優先度**: 🟡 Medium → ✅ 完了

- [ ] **②-3 パフォーマンス改善**
  - **問題**: 不要な再レンダリング、メモ化不足
  - **解決策**: React.memo適用、useMemo/useCallback活用
  - **見積時間**: 2-3時間
  - **優先度**: 🟡 Medium

### 🟢 **Phase 3: 品質向上（今月中）**

- [ ] **③-1 テスト追加**
  - **解決策**: Jest + React Testing Library導入
  - **見積時間**: 6-8時間
  - **優先度**: 🟢 Low

- [ ] **③-2 ディレクトリ構造整理**
  - **問題**: `app/`と`components/`役割不明確
  - **解決策**: 推奨構造への移行
  - **見積時間**: 4-5時間
  - **優先度**: 🟢 Low

---

## 🎨 **UI/UXレイアウト統一プロジェクト（PoC実装完了）** ⭐NEW

### ✅ **Phase 2-6: レイアウト改良 PoC実装（完了）** - 2025年6月10日 ⭐NEW
- [x] **AnalyticsPageLayoutV2 実装**
  - 実施内容: 3層レイアウト構造（ヘッダー20%制限、コントロール層、メインコンテンツ80%）
  - 機能実装: 折りたたみヘッダー/フィルター、コンパクトKPIカード、レスポンシブ対応
  - 技術特徴: CSS transitions（300ms）、コンテナクエリ、フレックスボックス
  - 実装ファイル: `src/components/layout/AnalyticsPageLayoutV2.tsx` (168行)
  - 所要時間: 45分

- [x] **売上ダッシュボードV2 PoC実装**
  - 実施内容: V2レイアウトを使用したPoC画面作成
  - 改良点: AI分析ボタン追加、リアルタイムデータバッジ、関連分析構造化
  - UX改善: ヘッダー領域50%削減、情報密度25%向上、操作効率30%向上
  - 実装ファイル: `src/app/sales/dashboard-v2/page.tsx` (170行)
  - アクセス: `/sales/dashboard-v2` でPoC確認可能

### 🔄 **Phase 2-7: UI/UX統一化改善プロジェクト（新規）** - 2025年6月10日 ⭐NEW

#### **検討事項の結論**
- [ ] **1. 抽出条件トグル標準化** 🔴 高優先
  - 決定: 全画面への実装を推奨（操作統一性・画面効率化・学習コスト削減）
  - 対象: 前年同月比・顧客購買・マーケットバスケット・月別売上統計画面
  - 実装方式: AnalyticsPageLayoutV2への標準機能組み込み
  - 見積時間: 各画面30分×4画面=2時間

- [ ] **2. ヘッダー重複情報統合** 🔴 高優先  
  - 決定: 階層的情報構造への変更を推奨（情報密度向上・理解促進・一貫性確保）
  - 改善効果: 重複削除により25%の領域節約、71%の情報重複率改善
  - 実装コンポーネント: `AnalyticsHeaderUnified` (完了)
  - 見積時間: 各画面適用20分×5画面=1.5時間

- [ ] **3. 補足説明エリア標準化** 🟡 中優先
  - 決定: 休眠顧客画面の優れた実装を全画面に展開
  - 実装コンポーネント: `AnalysisDescriptionCard` (完了)
  - 5バリアント対応: purpose/usage/insight/warning/tip
  - 見積時間: 各画面説明文作成15分×8画面=2時間

#### **実装ロードマップ**
- [ ] **Phase 2-7-1: 実証実装** 🔴 緊急（今週実施）
  - 対象: 前年同月比【商品】画面での統合実装
  - 内容: ヘッダー統合 + 抽出条件トグル + 補足説明
  - 目的: 3要素統合時の効果検証・操作性確認
  - 見積時間: 1時間

- [ ] **Phase 2-7-2: 横展開実装** 🟡 重要（来週実施）
  - 対象: 顧客購買【顧客】画面
  - 内容: 実証結果を反映した改良版実装
  - 目的: 異なる画面での適用効果測定
  - 見積時間: 45分

- [ ] **Phase 2-7-3: 全画面展開** 🟢 通常（月内完了）
  - 対象: 残り分析画面（マーケットバスケット・月別売上等）
  - 内容: 標準化されたパターンでの段階適用
  - 目的: 全体統一感の実現
  - 見積時間: 3時間

#### **成功指標**
- **定量指標**: 操作効率20%向上、エラー率30%削減、ユーザー満足度4.0→4.5
- **定性指標**: UI統一感、分析目的明確化、画面領域有効活用

### ✅ **Phase 2-1: 共通コンポーネント基盤構築（完了）** - 2025年6月3日
- [x] **共通KPIカードコンポーネント作成**
  - 実施内容: `components/common/KPICard.tsx`の新規作成
  - 成果: shadcn/ui準拠、TypeScript型安全、4色バリエーション対応
  - 機能: 値表示、単位表示、変化率表示、アイコン対応、ホバーエフェクト
  - 技術実装: Tailwind CSS、高さ100px統一、レスポンシブ対応
  - 所要時間: 20分
  - **実装場所**: `src/components/common/KPICard.tsx`
  - **⚠️ 技術的負債**: 統一前の重複KPIカード削除が必要

- [x] **共通レイアウトテンプレート作成**
  - 実施内容: `components/layout/AnalyticsPageLayout.tsx`の新規作成
  - 成果: 
    - ページヘッダー・KPIセクション・フィルター・メインコンテンツの統一構造
    - QuickActionボタン・NavigationCardヘルパーコンポーネント
    - 最大4つKPIカード制限、レスポンシブグリッド対応
  - デザインパターン: props driven design、コンポーネント合成パターン
  - 所要時間: 25分
  - **実装場所**: `src/components/layout/AnalyticsPageLayout.tsx`

### 🎯 **Phase 2-3: 技術的負債統合（予定）**
- [ ] **売上ダッシュボード技術的負債解消**
  - 予定内容: 新DataService統合、型定義統一、エラーハンドリング
  - 重点改善: KPIカード重複削除、Props Drilling解消
  - 見積時間: 2時間

- [ ] **顧客ダッシュボード技術的負債解消**
  - 予定内容: 共通レイアウト適用、状態管理最適化
  - 重点改善: CustomerDashboard分割、型安全性向上
  - 見積時間: 3時間

---

## 🚀 **メニュー構造改善プロジェクト**

### ✅ **Phase 0: 基盤整備（完了）** - 2025年6月3日
- [x] **新しいディレクトリ構造作成**
  - 実施内容: sales/, purchase/, customers/, ai-insights/ の階層構造構築
  - 成果: 11個のページファイル作成、URLベースルーティング実現
  - 所要時間: 1時間
  - **学習価値**: Next.js App Router実践、ディレクトリ設計
  - **⚠️ 技術的負債**: ディレクトリ構造の不整合要改善

- [x] **ナビゲーションシステム刷新**
  - 実施内容: AppContext拡張、MainLayout全面刷新、階層的サイドナビ実装
  - 成果: タブベース→URLベースへの移行、実装状況可視化
  - **技術成果**: React Router + TypeScript型安全ナビゲーション
  - **⚠️ 技術的負債**: Props Drilling、状態管理分散要改善

---

## 📊 **実装完了機能一覧（技術的負債含む）**

### 🚧 **実装中機能（優先度高）**
1. **休眠顧客【顧客】** (CUST-01-DORMANT) - 🚧 フロントエンド基本UI完了、API連携準備中
2. **前年同月比【商品】** (PROD-01-YOY) - 🚧 フロントエンド基本UI完了、データ連携準備中
3. **購入回数【購買】** (PURCH-02-COUNT) - 🚧 フロントエンド基本UI完了、データ連携準備中

### ❌ **未着手機能（優先度高）**
4. **データ取得バッチ** (BATCH-01-DATA) - ❌ Azure Functions予定
5. **マルチテナント対応管理機能** (AUTH-01-MULTI) - ❌ Shopify OAuth・認証・管理機能予定

### ✅ **完了機能（モック実装完了）**
6. **組み合わせ商品【商品】** (PROD-03-BASKET) - 📝 モック実装完了
7. **F階層傾向【購買】** (PURCH-03-FTIER) - 📝 モック実装完了
8. **購入頻度【商品】** (PROD-02-FREQ) - 📝 モック実装完了
9. **月別売上統計【購買】** (PURCH-01-MONTHLY) - 📝 モック実装完了
10. **顧客購買【顧客】** (CUST-02-ANALYSIS) - 📝 モック実装完了

> 📌 **注記**: 上記5機能はモックデータを使用したフロントエンドUI実装まで完了していますが、実際のAPI連携やバックエンド実装は未着手です。

### 🔍 **技術的負債影響度評価**
- **High影響**: 3機能（API切り替え時に問題）→ 実装中機能
- **Medium影響**: 5機能（保守性・パフォーマンス）
- **Low影響**: 2機能（コードスタイルのみ）

---

## 🚨 **優先対応タスクリスト（更新）**

### **即座に対応（今週中）**
1. **休眠顧客機能API実装** - 🔴 Critical
2. **前年同月比機能API実装** - 🔴 Critical
3. **購入回数機能API実装** - 🔴 Critical
4. **データ取得バッチ設計** - 🔴 Critical

### **7月実装前に対応（来週-6月末）**
1. **マルチテナント認証設計** - 🔴 Critical
2. **Azure Functions環境構築** - 🟡 Medium
3. **Shopify OAuth実装** - 🟡 Medium
4. **UXリサーチ準備** - 🟡 Medium ⭐NEW
   - 参加者リクルーティング開始
   - インタビュー環境構築・テスト

### **7月中旬（Shopify申請前）**
1. **UXリサーチ実施** - 🔴 Critical ⭐NEW
   - 12セッション価値検証インタビュー
   - 機能優先順位・価格戦略データ収集
2. **パフォーマンス改善** - 🟡 Medium
3. **ディレクトリ構造整理** - 🟢 Low

### **段階的対応（今月中-随時）**
1. **UXリサーチ分析・報告** - 🔴 Critical ⭐NEW
   - インサイト分析・戦略提言
   - プロダクト改善指針策定
2. **テスト追加** - 🟢 Low
3. **ドキュメント更新** - 🟢 Low
4. **インフラ・コスト管理** - ✅ **ドキュメント作成完了** ⭐NEW
   - Azure コスト試算ガイド作成済み
   - コスト監視計画（簡略版・詳細版）作成済み
   - 1日1,000リクエスト規模での最適化方針確立

---

## 🏗️ **インフラ・コスト管理プロジェクト（新規）** ⭐NEW

### ✅ **Phase IC-1: ドキュメント整備（完了）** - 2025年1月10日 ⭐NEW
- [x] **Azure コスト試算ガイド作成**
  - 実施内容: 全Azureサービスの料金体系・規模別試算
  - 考慮漏れ追加: 認証・監視・ネットワーク・バックアップサービス
  - 成果物: `docs/06-infrastructure-cost/azure-cost-estimation-guide.md`
  - 所要時間: 15分

- [x] **コスト監視計画策定**
  - 実施内容: 小規模・大規模向けの2種類の計画作成
  - 簡略版: 1日1,000リクエスト規模（月額¥5,000以下）
  - 詳細版: 将来の規模拡大時（日次10,000リクエスト以上）
  - 成果物: 
    - `docs/06-infrastructure-cost/cost-monitoring-plan.md`（簡略版）
    - `docs/06-infrastructure-cost/cost-monitoring-plan-detailed.md`（詳細版）
  - 所要時間: 20分

- [x] **追加リソース作成** ⭐NEW
  - 実施内容: Azure価格情報集・実践ワークシート作成
  - 価格リソース集: 公式リンク集、ツール使用法、API情報
  - 実践ワークシート: Phase別記録、週次レビュー、演習
  - 成果物:
    - `docs/06-infrastructure-cost/azure-pricing-resources.md`
    - `docs/06-infrastructure-cost/cost-simulation-worksheet.md`
  - 所要時間: 20分

### 🔄 **Phase IC-2: 初期デプロイ（予定）** - 2025年1月中旬
- [ ] **Azure環境構築**
  - 予定内容: PostgreSQL B1ms、月額予算アラート¥5,000設定
  - 開発環境: 自動停止設定（夜間・週末）
  - 見積時間: 2時間

- [ ] **簡易負荷テスト**
  - 予定内容: PowerShellによる100リクエストテスト
  - 確認項目: APIレスポンス、エラー率、基本ログ
  - 見積時間: 30分

### 📊 **Phase IC-3: 月次レビュー（定期）** - 毎月初旬
- [ ] **コスト分析（5分/月）**
  - Azure Cost Management確認
  - PostgreSQLコスト比率確認（目標80%以上）
  - 異常課金チェック

- [ ] **スケールアップ判断**
  - 日次5,000リクエスト超 → B2s検討
  - DB CPU 80%超 → スペック見直し
  - 詳細版計画への移行検討

---

## 🎯 **学習戦略（技術的負債対応版）**

### 📅 **短期戦略（最優先 - 今週）**

#### 🔥 **優先度高機能実装学習**（最高優先度）
- [ ] **休眠顧客機能実装パターン学習**
  - 詳細: API設計、データ処理、UI連携
  - **学習制約**: 実際のShopifyAPI連携を想定した設計

- [ ] **前年同月比機能実装パターン学習**
  - 詳細: 計算ロジック、データ集計、パフォーマンス最適化
  - **品質確保**: 全コンポーネントでの型安全確保

### 📅 **中期戦略（2-4週間）**

#### 🟡 **バッチ処理・認証実装学習**
- [ ] **Azure Functions実装パターン**
  - 詳細: Timer Trigger、Shopify API連携、エラーハンドリング
  - 見積時間: 6-8時間
  - 学習制約: パフォーマンス改善を数値測定

- [ ] **Shopify OAuth認証実装**
  - 詳細: OAuth 2.0フロー、JWT認証、マルチテナント対応
  - 見積時間: 4-6時間
  - 実践要素: 実際のセキュリティ要件対応

---

*最終更新: 2025年7月26日（優先度高機能実装フェーズ）*
*作成者: AI Assistant*
*次回レビュー: 実装中機能完了時*