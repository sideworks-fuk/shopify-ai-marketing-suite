# 📐 アーキテクチャドキュメント

## 概要
このフォルダには、Shopify AI Marketing Suiteのシステムアーキテクチャに関するすべての技術文書が含まれています。

---

## 📁 フォルダ構成

```
02-architecture/
├── 01-システム設計/        # システム全体の設計書
├── 02-データベース設計/    # DB設計・モデル定義
├── 03-技術スタック/        # 使用技術・開発ガイド
├── 04-移行計画/           # 技術的負債・移行計画
└── billing/               # 課金システム設計（詳細）
```

---

## 📚 主要ドキュメント

### 🏗️ 01-システム設計
| ドキュメント | 説明 | 最終更新 |
|------------|------|---------|
| [システムアーキテクチャ.md](./01-システム設計/システムアーキテクチャ.md) | 全体システム構成、コンポーネント設計 | 2025-07-26 |
| [バッチ処理アーキテクチャ.md](./01-システム設計/バッチ処理アーキテクチャ.md) | HangFire、定期処理設計 | 2025-07-26 |

### 💾 02-データベース設計
| ドキュメント | 説明 | 最終更新 |
|------------|------|---------|
| [データベースモデル一覧.md](./02-データベース設計/データベースモデル一覧.md) | 全テーブル定義、ER図 | 2025-08-05 |

### 🛠️ 03-技術スタック
| ドキュメント | 説明 | 最終更新 |
|------------|------|---------|
| [技術スタック概要.md](./03-技術スタック/技術スタック概要.md) | 使用技術一覧、選定理由 | 2025-08-05 |
| [開発技術ガイド.md](./03-技術スタック/開発技術ガイド.md) | 開発環境構築、ベストプラクティス | 2025-08-05 |
| [開発打ち合わせメモ.md](./03-技術スタック/開発打ち合わせメモ.md) | 技術選定の議事録 | 2025-08-05 |

### 🔄 04-移行計画
| ドキュメント | 説明 | 最終更新 |
|------------|------|---------|
| [モノレポ移行計画.md](./04-移行計画/モノレポ移行計画.md) | モノレポへの移行戦略 | 2025-08-02 |
| [技術的負債.md](./04-移行計画/技術的負債.md) | 技術的負債の管理・解消計画 | 2025-08-02 |

### 💳 billing（課金システム）
| ドキュメント | 説明 | 最終更新 |
|------------|------|---------|
| [README.md](./billing/README.md) | 課金システム文書一覧 | 2025-08-12 |
| [billing-flow-diagrams.md](./billing/billing-flow-diagrams.md) | Mermaid図解（10種類） | 2025-08-12 |
| [billing-system-design.md](./billing/billing-system-design.md) | 詳細設計書 | 2025-08-12 |

---

## 🎯 クイックリンク

### 新規開発者向け
1. 📖 [技術スタック概要](./03-技術スタック/技術スタック概要.md) - まず読む
2. 🏗️ [システムアーキテクチャ](./01-システム設計/システムアーキテクチャ.md) - 全体像を理解
3. 💾 [データベースモデル](./02-データベース設計/データベースモデル一覧.md) - DB構造を確認

### 実装担当者向け
- 💳 [課金システム設計](./billing/) - 課金実装の詳細
- ⚙️ [バッチ処理設計](./01-システム設計/バッチ処理アーキテクチャ.md) - 定期処理の実装

---

## 🏛️ アーキテクチャ概要

### システム構成
```
┌─────────────────────────────────────────┐
│          フロントエンド (Next.js)          │
│         React + TypeScript + Polaris      │
└────────────────┬────────────────────────┘
                 │
┌────────────────▼────────────────────────┐
│         バックエンドAPI (ASP.NET Core)    │
│          C# + Entity Framework           │
└────────────────┬────────────────────────┘
                 │
        ┌────────┴────────┬──────────┐
        │                 │          │
┌───────▼──────┐ ┌───────▼──────┐ ┌─▼──────┐
│ Azure SQL DB │ │ Shopify API  │ │ HangFire│
└──────────────┘ └──────────────┘ └─────────┘
```

### 主要技術
- **Frontend**: Next.js 14, React 18, TypeScript, Shopify Polaris
- **Backend**: ASP.NET Core 8, C#, Entity Framework Core
- **Database**: Azure SQL Database
- **Infrastructure**: Azure App Service, Azure Static Web Apps
- **CI/CD**: GitHub Actions
- **Monitoring**: Application Insights

---

## 📋 設計原則

### 1. マイクロサービス志向
- フロントエンドとバックエンドの分離
- APIファーストアプローチ
- 独立したデプロイメント

### 2. スケーラビリティ
- 水平スケーリング対応
- キャッシュ戦略
- 非同期処理（HangFire）

### 3. セキュリティ
- OAuth 2.0認証
- JWT トークン
- HTTPS必須
- データ暗号化

### 4. 保守性
- 型安全（TypeScript/C#）
- 自動テスト
- ドキュメント駆動開発

---

## 🔄 更新履歴

| 日付 | 更新内容 | 担当者 |
|------|---------|--------|
| 2025-08-12 | フォルダ再構成、日本語化 | Kenji |
| 2025-08-12 | 課金システム設計追加 | Kenji |
| 2025-08-05 | 初期ドキュメント作成 | Team |

---

## 👥 担当者

- **システム設計**: Kenji（PM）、Takashi
- **データベース設計**: Takashi
- **フロントエンド**: Yuki
- **課金システム**: Takashi（Backend）、Yuki（Frontend）

---

## 📞 問い合わせ

技術的な質問は、Slackチャンネル `#tech-architecture` までお願いします。

---

**最終更新**: 2025年8月12日