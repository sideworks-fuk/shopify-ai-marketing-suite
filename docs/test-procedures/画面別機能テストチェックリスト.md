# 画面別機能テストチェックリスト

## 概要
- 対象: 申請対象の本番画面（開発/検証用は別セクションに整理）
- 目的: 主要画面の機能・プラン制御・データ表示・エラー/空状態・ナビゲーションを網羅的に確認し、証跡を保存する
- 証跡: 画面録画/スクリーンショット、日時、ストア、プラン種別（無料/有料）、バージョン、ハッシュ
- 参照: `docs/00-production-release/本番環境テスト計画.md`

## 前提条件
- 認証済み・Shopify埋め込みコンテキストで表示されること
- 無料プランは「休眠顧客分析」のみ可。他機能はゲート/アップグレード導線
- 課金フロー: プラン選択 → 承認 → Webhook反映 → 機能解放/制限

---

## A. 申請対象（ユーザー向け）

### A-1. 共通観点（全画面共通で確認）
- [ ] 認証/権限: 未認証時に適切に誘導される
- [ ] 埋め込み表示: Shopify管理画面内で正しく描画
- [ ] プラン制御: 無料=休眠顧客のみ許可/他はゲート、有料=全解放
- [ ] データ状態: ローディング/空/エラーの表示が適切
- [ ] ナビゲーション: パンくず/戻る/メニュー遷移が機能
- [ ] パフォーマンス: 初回レンダ<=3s（目安）
- [ ] 文言/表記: 無料方針「休眠顧客のみ」に統一

### A-2. 画面別
- `/` トップ（`src/app/page.tsx`）
  - [ ] ログイン後にダッシュボードへ誘導/表示
  - [ ] 無料プラン時の非対象機能にゲート表示
- `/(authenticated)/dashboard`（`src/app/(authenticated)/dashboard/page.tsx`）
  - [ ] 指標カード/グラフ表示
  - [ ] 無料プラン時のゲート挙動
- `/(authenticated)/sync`（`src/app/(authenticated)/sync/page.tsx`）
  - [ ] 同期状態/エラー表示
  - [ ] 初回同期導線の可視性
- `/sales/dashboard`（`src/app/sales/dashboard/page.tsx`）
  - [ ] 主要KPIの表示
  - [ ] 無料プラン時はゲート
- `/sales/dashboard-v2`
  - [ ] v2レイアウト/グラフ表示
  - [ ] 無料プラン時はゲート
- `/sales/monthly-stats`
  - [ ] 月次集計の正確性/期間切替
  - [ ] 無料プラン時はゲート
- `/sales/market-basket`
  - [ ] 同時購入分析の表示/フィルタ
  - [ ] 無料プラン時はゲート
- `/sales/purchase-frequency`
  - [ ] 回数分布/セグメント
  - [ ] 無料プラン時はゲート
- `/purchase/f-tier-trend`
  - [ ] Fランクトレンド描画
  - [ ] 無料プラン時はゲート
- `/purchase/frequency-detail`
  - [ ] ユーザー深掘り/フィルタ
  - [ ] 無料プラン時はゲート
- `/purchase/count-analysis`
  - [ ] 注文数集計/分類
  - [ ] 無料プラン時はゲート
- `/customers/dashboard`
  - [ ] 顧客指標/セグメント
  - [ ] 無料プラン時はゲート
- `/customers/profile`
  - [ ] 顧客詳細/履歴
  - [ ] 無料プラン時はゲート
- `/customers/dormant`（休眠顧客分析：無料で利用可）
  - [ ] 一覧/フィルタ/ページング（仮想スクロール含む）
  - [ ] 期間境界の挙動
  - [ ] CSV/エクスポート等（存在する場合）
- `/ai-insights`
  - [ ] インサイト表示/説明
  - [ ] 無料プラン時はゲート
- `/settings/billing`
  - [ ] プラン表示/変更/キャンセル導線
  - [ ] Webhook反映の即時性
- `/billing` `/billing/subscription` `/billing/upgrade` `/billing/free-plan-setup`
  - [ ] プラン選択→承認→反映までの一連動作
  - [ ] 0$/1$テストでの整合/監査ログ
- `/setup/initial` `/setup/syncing`
  - [ ] 初期セットアップのガイダンス
  - [ ] 同期進行/完了ハンドリング
- `/install`
  - [ ] インストール直後の誘導/初期状態

---

## B. 開発/検証用（公開対象外）
- `src/app/dev-*` / `src/app/test-*` / `src/app/*-api-test` / `src/app/debug-*` / `src/app/database-test`
  - [ ] 本番ビルドで非表示/到達不可であること
  - [ ] 認証ガード/ルーティング制限の確認

---

## 完了条件
- [ ] A-1全項目に合格し、A-2各画面で主要機能が合格
- [ ] 証跡（動画/スクショ/ログ）保存済み
- [ ] 既知の制約/未対応はリスト化しリリース判断共有
